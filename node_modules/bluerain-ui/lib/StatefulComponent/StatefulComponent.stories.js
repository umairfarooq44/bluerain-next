'use strict';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _storybook = require('@kadira/storybook');

var _StatefulComponent = require('./StatefulComponent.component');

var _StatefulComponent2 = _interopRequireDefault(_StatefulComponent);

var _StatefulComponent3 = require('../../__mocks__/StatefulComponent.mock');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var stories = (0, _storybook.storiesOf)('Stateful Component', module);
// stories.addDecorator(withKnobs);


// Mock Data
var TestComponent = function TestComponent(props) {
  return _react2.default.createElement(
    'div',
    null,
    props.data.query
  );
};
var ViewerComponent = function ViewerComponent(props) {
  return _react2.default.createElement(
    'div',
    null,
    props.data.viewer
  );
};
var NestedDataComponent = function NestedDataComponent(props) {

  var count = props.data.viewer.sites.edges.length;

  return _react2.default.createElement(
    'div',
    null,
    'I have ' + count + ' items'
  );
};

var checkData = function checkData(props, dataProp) {
  try {
    var data = props.data.viewer.sites.edges;

    if (data && data.length > 0) {
      return true;
    }
  } catch (error) {
    return false;
  }

  return false;
};

stories.addWithInfo('Loaded Data', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: TestComponent, data: _StatefulComponent3.loadedData });
});

stories.addWithInfo('No Data (null)', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: TestComponent, data: _StatefulComponent3.noData });
});

stories.addWithInfo('Loading State', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: TestComponent, data: _StatefulComponent3.loadingData });
});

stories.addWithInfo('Error State', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { data: _StatefulComponent3.errorData, component: TestComponent });
});

stories.addWithInfo('Loading & Error State', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: TestComponent, data: _StatefulComponent3.loadingAndErrorData });
});

stories.addWithInfo('Custom Data Field', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: ViewerComponent, data: _StatefulComponent3.customDataField, dataField: 'viewer' });
});

stories.addWithInfo('Custom Data Checking (empty data)', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: NestedDataComponent, data: _StatefulComponent3.customCheckDataFunctionEmpty, checkData: checkData });
});

stories.addWithInfo('Custom Data Checking (filled data)', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: NestedDataComponent, data: _StatefulComponent3.customCheckDataFunctionFilled, checkData: checkData });
});

stories.addWithInfo('Custom Data Checking (bad data)', function () {
  return _react2.default.createElement(_StatefulComponent2.default, { component: NestedDataComponent, data: _StatefulComponent3.customCheckDataFunctionBad, checkData: checkData });
});

stories.addWithInfo('Child Component throws error', function () {

  // class Bomb extends React.Component {
  //   render() {
  //     throw new Error('Boom!');
  //   }
  // }

  // return (
  //   <StatefulComponent component={Bomb} data={loadedData} />
  // );
  var Bomb = function Bomb() {
    throw new Error('Boom!');
  };

  return _react2.default.createElement(_StatefulComponent2.default, { component: Bomb, data: _StatefulComponent3.loadedData });
});