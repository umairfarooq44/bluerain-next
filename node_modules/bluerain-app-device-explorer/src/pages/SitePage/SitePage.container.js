import React, { PropTypes } from 'react';
import StatefulPage from './SitePage.stateful';
import PageGQL from './SitePage.graphql';

const propTypes = {
  showLoading: PropTypes.func,
  params: PropTypes.func
};

const defaultProps = {
  title: 'Sites Page'
};

class Page extends React.Component {
  componentWillMount() {
    if (this.props.showLoading) {
      this.props.showLoading();
    }
    return null;
  }

  render() {
    const siteId = this.props.params.siteId;
    const Component = PageGQL(StatefulPage, siteId);
    return (
      <Component siteId={this.props.params.siteId} />
    );
  }
}

Page.propTypes = propTypes;
Page.defaultProps = defaultProps;

export default Page;
