/**
 * Created by anser on 2/24/17.
 */
import React, { PropTypes } from 'react';
import { graphql } from 'react-apollo';
import { withRouter } from 'react-router';
// import { withNotifications } from 'bluerain-client-services';
import { withNotifications } from 'bluerain-client-services';
import TransferRequestsQuery from './query.graphql';
import AssetTransferRequestComponent from './AssetTransferRequests.component';


const propTypes = {
  data: PropTypes.object
};

const defaultProps = {};

class AssetTransferRequests extends React.Component {

  render() {
    try {
      if (!this.props.data || !this.props.data.viewer) {
        return (<div />);
      }
      const requests = this.props.data.viewer.transferRequests.edges;
      if (requests.length > 0) {
        return (
          <div>
            <AssetTransferRequestComponent
              currentUserId={this.props.data.viewer.id} requests={requests}
              ownerId={requests[0].node.currentOwnerUserId}
            />
          </div>
        );
      }
      return (
        <div style={{ paddingTop: '20px' }}>
          <div className="alert alert-info" role="alert">
            <strong>Info!</strong> There are currently no transfer ownership requests.
          </div>
        </div>
      );
    } catch (e) {
      console.log('ERROR =>', e);
    }

  }
}

// export default UserInfoTransfer;

// const componentWithQuery = graphql(TransferRequestsQuery, {
// })(AssetTransferRequests);

export default graphql(TransferRequestsQuery)(withNotifications(withRouter(AssetTransferRequests)));

AssetTransferRequests.propTypes = propTypes;
AssetTransferRequests.defaultProps = defaultProps;

