/**
 * Created by atif on 12/18/16.
 */
import { graphql } from 'react-apollo';
import { fromGlobalId } from 'graphql-relay';
// import VoltageChartStateful from './VoltageChart.stateful';
import VoltageChartContainer from './VoltageChart.container';
import ViewerQuery from './query.graphql';

export default graphql(ViewerQuery, {
  options: (args) => {

    // const queryString = {
    //   type: 'state',
    //   time: { between: [args.startDate, args.endDate] },
    //   'data.voltage': { exists: true }
    // };
    const queryString = {
      where: {
        type: 'state',
        assetId: fromGlobalId(args.assetId).id,
        time: { between: [args.startDate, args.endDate] },
        'data.voltage': { exists: true }
      },
      order: 'time DESC'
    };
    return { variables: { assetId: args.assetId, queryString } };
  }
})(VoltageChartContainer);

