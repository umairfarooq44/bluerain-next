import { graphql } from 'react-apollo';
import ViewerQuery from './query.graphql';
// import CaloriesChartStateful from './CaloriesChart.stateful';
import CaloriesChartContainer from './CaloriesChart.container';

export default graphql(ViewerQuery, {
  options: (args) => {
    const startDateFormatted = args.startDate;
    const endDateFormatted = args.endDate;

    const queryString = `[{\"condition\":\"exists\",\"key\":\"data.calories\"},{\"condition\":\"descending\",\"key\":\"time\"},{\"condition\":\"lessThanOrEqualTo\",\"key\":\"time\",\"value\":{\"__type\":\"Date\",
  \"iso\":\"${endDateFormatted}\"}}, {\"condition\":\"greaterThanOrEqualTo\",\"key\":\"time\",\"value\":{\"__type\":\"Date\",\"iso\":\"${startDateFormatted}\"}}]`;

    return { variables: { assetId: args.assetId, queryString } };
  }
})(CaloriesChartContainer);
