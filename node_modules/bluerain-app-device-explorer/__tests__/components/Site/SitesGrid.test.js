/**
 * Created by anser on 22/5/17.
 */

import React from 'react';
import { shallow } from 'enzyme';
import TestUtils from 'react-addons-test-utils';
import { SitesGrid } from '../../../src/components/Site/SitesGrid/SitesGrid.container';


describe('SitesGrid Component Test Specifications', () => {

  it('should check proptype of data', () => {
    const sitesData = {
      viewer :{
        sites: {
          edges: [
            {
              node: {
                image: '',
                name: 'BlueEast',
                siteType: {
                  icon: '',
                  name: 'Work'
                }
              }
            },
            {
              node: {
                image: '',
                name: 'My Home',
                siteType: {
                  icon: '',
                  name: 'Home'
                }
              }
            }
          ]

        }

      }
    };
    const cardWrapper = <SitesGrid data={sitesData} />;
    expect( typeof cardWrapper.props.data ).toEqual( 'object' );
  });

  it('CardView element count should be equal to 2', () => {
    const sitesData = {
      viewer :{
        sites: {
          edges: [
            {
              node: {
                image: '',
                name: 'BlueEast',
                siteType: {
                  icon: '',
                  name: 'Work'
                }
              }
            },
            {
              node: {
                image: '',
                name: 'My Home',
                siteType: {
                  icon: '',
                  name: 'Home'
                }
              }
            }
          ]

        }

      }
    };
    const cardWrapper = shallow(<SitesGrid data={sitesData} />);
    expect(cardWrapper.find('CardView').length).toEqual(2);
  });

  it('GridViewItem element count should be equal to 2', () => {
    const sitesData = {
      viewer :{
        sites: {
          edges: [
            {
              node: {
                image: '',
                name: 'BlueEast',
                siteType: {
                  icon: '',
                  name: 'Work'
                }
              }
            },
            {
              node: {
                image: '',
                name: 'My Home',
                siteType: {
                  icon: '',
                  name: 'Home'
                }
              }
            }
          ]

        }

      }
    };
    const cardWrapper = shallow(<SitesGrid data={sitesData} />);
    expect(cardWrapper.find('GridViewItem').length).toEqual(2);
  });

  it('In case of no sites, add site message div will be rendered', () => {
    const sitesData = {
      viewer :{
        sites: {
          edges: [

          ]
        }
      }
    };
    const component = TestUtils.renderIntoDocument( <SitesGrid data={sitesData} /> );

    const nameDiv = TestUtils.scryRenderedDOMComponentsWithClass(component, 'app-content');

    expect(TestUtils.isCompositeComponent(component)).toBeTruthy();
    expect(nameDiv.length).toEqual(1);

  });

});

